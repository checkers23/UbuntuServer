# Samba Configuration File - LAB07 Domain Controller
# Generated by: samba-tool domain provision
# Domain: lab07.lan
# DC: ls07.lab07.lan
# Last modified: Febrero 2026

[global]
    # DNS and forwarding
    dns forwarder = 10.239.3.7
    
    # Domain identification
    netbios name = LS07
    realm = LAB07.LAN
    workgroup = LAB07
    
    # Server role
    server role = active directory domain controller
    
    # Additional settings (optional)
    # log level = 3
    # max log size = 5000

# SYSVOL share - Required for Active Directory
[sysvol]
    path = /var/lib/samba/sysvol
    read only = No

# NETLOGON share - Required for logon scripts
[netlogon]
    path = /var/lib/samba/sysvol/lab07.lan/scripts
    read only = No

#===================== Share Definitions =====================

# Finance Department Documents
[FinanceDocs]
    comment = Documentos del Departamento de Finanzas
    path = /srv/samba/finance
    valid users = @Finance, @"Domain Admins"
    read only = no
    browseable = yes
    create mask = 0660
    directory mask = 0770

# HR Department Documents
[HRDocs]
    comment = Documentos del Departamento de RRHH
    path = /srv/samba/hr
    valid users = @HR_Staff, @"Domain Admins"
    read only = no
    browseable = yes
    create mask = 0660
    directory mask = 0770

# Public Shared Documents (Read-Only)
[Public]
    comment = Documentos PÃºblicos Compartidos (Solo Lectura)
    path = /srv/samba/public
    valid users = @"Domain Users"
    read only = yes
    browseable = yes
    write list = @"Domain Admins"

# Notes:
# - Finance share uses sticky bit (+t) on directory to prevent file deletion
# - HR share allows full read/write for HR_Staff group members
# - Public share is read-only for all Domain Users
# - Domain Admins have full control on all shares
